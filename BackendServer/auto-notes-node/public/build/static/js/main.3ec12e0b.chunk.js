(this["webpackJsonpauto-notes"]=this["webpackJsonpauto-notes"]||[]).push([[0],{282:function(t,e){},283:function(t,e){},291:function(t,e){},294:function(t,e){},295:function(t,e){},296:function(t,e,n){"use strict";n.r(e);var o=n(36),r=n(67),a=n.n(r),i=n(230),c=n.n(i),s=n(5),h=n(10),d=n(46),u=n(14),l=n(15),b=n(4),x=n.n(b),p=n(12),f=n(231),m=n.n(f),y=n(189),j=function(t){var e,n,o=["!","(",")","+","|","\u2015","0","1","2","3","4","5","6","7","8","9","=","\ud835\udc4e","\u03b1","|","\ud835\udc4f","\u03b2","\ud835\udc50","cos","\ud835\udc51","\u0394","\xf7","\ud835\udc52","\u2203","\ud835\udc53","\u2200","\ud835\udc54","\u03b3","\u2265",">","\ud835\udc89","\ud835\udc56","in","\u221e","\u222b","\ud835\udc57","\ud835\udc58","\u2113","\u03bb","\u2264","lim","log","<","\ud835\udc5a","mu","\ud835\udc5b","\u2260","\ud835\udc5c","\ud835\udc5d","\u03d5","\u03c0","\xb1","\ud835\udc5e","\ud835\udc5f","\u2192","\ud835\udc60","\u03c3","sin","\u221a","\u03a3","\ud835\udc61","tan","\u03b8","\xd7","\ud835\udc62","\ud835\udc63","\ud835\udc64","\ud835\udc65","\ud835\udc66","\ud835\udc67","[","]","{","}"],r=t.color(230,230,241),a={pen:{keyCode:80,name:"pen",down:function(){t.mouseX-c.x>=0&&t.mouseX-c.x<=t.width&&t.mouseY-c.y>=0&&t.mouseY-c.y<=t.height&&(f={path:[],border:null,text:null,timeFinished:null,shouldAutoMatch:!1},l.push(f))},drag:function(){var e=t.createVector(t.mouseX-c.x,t.mouseY-c.y);f.path.push(e)},release:function(){var t=O([f.path]);f.timeFinished=Date.now(),f.border=t,f.shouldAutoMatch=d}},eraser:{keyCode:69,name:"eraser",down:function(){},drag:function(){t.fill(255,100,100),t.ellipse(t.mouseX-c.x,t.mouseY-c.y,10,10),l.forEach((function(e){t.mouseX-c.x>e.border.topLeft.x&&t.mouseX-c.x<e.border.bottomRight.x&&t.mouseY-c.y>e.border.topLeft.y&&t.mouseY-c.y<e.border.bottomRight.y&&l.splice(l.indexOf(e),1)})),b.forEach((function(e){t.mouseX-c.x>e.border.topLeft.x&&t.mouseX-c.x<e.border.bottomRight.x&&t.mouseY-c.y>e.border.topLeft.y&&t.mouseY-c.y<e.border.bottomRight.y&&b.splice(b.indexOf(e),1)}))},release:function(){}},pan:{keyCode:65,name:"pan",down:function(){u=t.createVector(t.mouseX-c.x,t.mouseY-c.y)},drag:function(){c=t.createVector(t.mouseX-u.x,t.mouseY-u.y)},release:function(){}}},i=a.pen,c=t.createVector(0,0),s=45,h=!0,d=!0,u=t.createVector(0,0),l=[],b=[],f={path:[],border:null,text:null,timeFinished:null,shouldAutoMatch:!1};function m(t){return j.apply(this,arguments)}function j(){return(j=Object(p.a)(x.a.mark((function r(a){var i,c,s,d,u,p,f,m,j;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=[],r.next=3,a.forEach((function(t){var n=y.b(v(t),[1,45,45,1]),r=e.predict([n]).arraySync()[0],a=r.reduce((function(t,e){return Math.max(t,e)}));i.push({probValue:a,label:o[r.indexOf(a)],paths:t})}));case 3:if(c=i[i.length-1],i.reverse().forEach((function(t){t.probValue-c.probValue>=.05&&(c=t)})),!(c.probValue<.6)){r.next=9;break}return l.forEach((function(t){c.paths.forEach((function(e){t.path===e&&(t.shouldAutoMatch=!1)}))})),h=!0,r.abrupt("return");case 9:s=O(c.paths),")"===(d=c.label)&&(d="("),b.forEach((function(t){Math.abs(t.border.maxWidth-s.maxWidth)<=50&&Math.abs(t.border.bottomRight.y-s.bottomRight.y)<=20&&Math.abs(t.border.topLeft.x-s.topLeft.x)<=1.5*t.border.maxWidth&&(s.maxWidth=t.border.maxWidth,s.topLeft.y=t.border.topLeft.y,s.bottomRight.y=t.border.bottomRight.y)})),u=n.textBounds(d,s.topLeft.x,s.bottomRight.y,s.maxWidth),p=u.w>u.h?s.maxWidth*(s.maxWidth/u.w):s.maxWidth*(s.maxWidth/u.h),f=n.textBounds(d,s.topLeft.x,s.bottomRight.y,p),m=t.createVector(s.topLeft.x+(s.maxWidth/2+s.topLeft.x)-(f.w/2+f.x),s.bottomRight.y-(f.h/2+f.y)+(s.topLeft.y+s.maxWidth/2)),b.push({text:c.label,border:s,txtLoc:m,textSize:p,paths:c.paths}),j=[],l.forEach((function(t){c.paths.forEach((function(e){t.path===e&&j.push(t)}))})),j.forEach((function(t){l.splice(l.indexOf(t),1)})),h=!0;case 22:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function g(){return(g=Object(p.a)(x.a.mark((function t(){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("loading model"),t.next=3,y.a("/api/getModel");case 3:e=t.sent,console.log("loaded model");case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(t){var e=O([t.path]),n=[t.path],o=[],r=t.timeFinished;return o.push([].concat(n)),l.forEach((function(a){a!==t&&null!=a.timeFinished&&(a.border.topLeft.x+a.border.maxWidth>e.topLeft.x&&a.border.topLeft.x<e.topLeft.x+e.maxWidth&&a.border.topLeft.y+a.border.maxWidth>e.topLeft.y&&a.border.topLeft.y<e.topLeft.y+e.maxWidth||Math.abs(r-a.timeFinished)<=700)&&(n.push(a.path),o.push([].concat(n)),e=O(n),r=a.timeFinished)})),o}function O(e){var n=t.createVector(t.width,t.height),o=t.createVector(0,0);e.forEach((function(t){t.forEach((function(t){t.x<n.x&&(n.x=t.x),t.y<n.y&&(n.y=t.y),t.x>o.x&&(o.x=t.x),t.y>o.y&&(o.y=t.y)}))}));var r=o.x-n.x>o.y-n.y?o.x-n.x:o.y-n.y,a=t.createVector((r-(o.x-n.x))/2,(r-(o.y-n.y))/2);return{maxWidth:r,topLeft:t.createVector(n.x-a.x,n.y-a.y),bottomRight:t.createVector(o.x-a.x,o.y+a.y)}}function v(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O(e),o=44/n.maxWidth,r=new Array(Math.pow(s,2)).fill(0);return e.forEach((function(e){var a=[];e.forEach((function(e){var r=t.createVector(Math.round((e.x-n.topLeft.x)*o),Math.round((e.y-n.topLeft.y)*o));a.push(r)}));for(var i=0;i<a.length;i++){if(i!==e.length-1){var c=Math.ceil(Math.sqrt(Math.pow(e[i].x-e[i+1].x,2)+Math.pow(e[i].y-e[i+1].y,2)));if(0===Math.abs(a[i].x-a[i+1].x))for(var h=0;h<Math.abs(a[i].y-a[i+1].y);h++){var d=a[i].x+s*(a[i].y-h*Math.sign(a[i].y-a[i+1].y));r[d]=1}else for(var u=(a[i].y-a[i+1].y)/Math.abs(a[i].x-a[i+1].x),l=Math.sign(a[i].x-a[i+1].x),b=0;b<c;b++){var x=t.map(b,0,c,0,Math.abs(a[i].x-a[i+1].x)),p=a[i].x-l*Math.round(x)+s*Math.round(a[i].y-u*x);r[p]=1}}r[Math.round(a[i].x+s*a[i].y)]=1}})),r}t.setup=function(){n=t.loadFont("/api/getFont"),t.textFont(n),function(){g.apply(this,arguments)}(),function(){var t=document.getElementById("penButton"),e=document.getElementById("eraserButton"),n=document.getElementById("panButton"),o=document.getElementById("matchCheckbox");t.addEventListener("click",(function(){i=a.pen})),e.addEventListener("click",(function(){i=a.eraser})),n.addEventListener("click",(function(){i=a.pan})),o.checked=d,o.addEventListener("change",(function(){d=o.checked}))}();var e=document.getElementById("sidebar");t.createCanvas(window.innerWidth-e.offsetWidth-20,window.innerHeight-50),t.background(r)},t.draw=function(){t.background(r),t.translate(c.x,c.y),t.textSize(20),t.stroke(0),t.strokeWeight(1),t.fill(0),t.text("".concat("x:",c.x.toString(),", y:",c.y.toString()),-c.x,20-c.y),t.textSize(30),t.text(i.name,-c.x,t.height-c.y),t.mouseIsPressed&&i.drag(),l.forEach((function(e){if(h&&e.shouldAutoMatch&&Math.abs(e.timeFinished-Date.now())>=1e3){h=!1;var n=w(e),o=[];n.forEach((function(t){o.push(t)})),m(o)}null==e.text&&(t.noFill(),t.strokeWeight(7),t.beginShape(),e.path.forEach((function(e){t.vertex(e.x,e.y)})),t.endShape())})),b.forEach((function(e){t.textSize(e.textSize),t.fill(0,0,0),t.strokeWeight(1),t.stroke(0),t.text(e.text,e.txtLoc.x,e.txtLoc.y)}))},t.mousePressed=function(){i.down()},t.mouseReleased=function(){i.release()},t.keyTyped=function(){for(var e in a)t.keyCode===a[e].keyCode&&(i.release(),i=a[e]);if(67===t.keyCode&&null!=f.timeFinished){var n=w(f),o=[];n.forEach((function(t){o.push(t)})),m(o)}else 82===t.keyCode?(l=[],b=[]):90===t.keyCode&&0!==b.length&&(b[b.length-1].paths.forEach((function(t){f={path:t,border:O([t]),text:null,timeFinished:Date.now(),shouldAutoMatch:!1},l.push(f)})),b.pop())}},g=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).board=a.a.createRef(),t}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.myP5=new m.a(j,this.board.current)}},{key:"render",value:function(){return Object(o.jsx)("div",{id:"whiteboard",ref:this.board})}}]),n}(a.a.Component),w=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(o.jsx)("div",{id:"sidebar",children:Object(o.jsxs)("ul",{children:[Object(o.jsxs)("li",{children:[Object(o.jsx)("label",{children:"Pen (p):"}),Object(o.jsx)("br",{}),Object(o.jsx)("button",{id:"penButton",children:"pen"})]}),Object(o.jsxs)("li",{children:[Object(o.jsx)("label",{children:"Eraser (e):"}),Object(o.jsx)("br",{}),Object(o.jsx)("button",{id:"eraserButton",children:"eraser"})]}),Object(o.jsxs)("li",{children:[Object(o.jsx)("label",{children:"pan (a):"}),Object(o.jsx)("br",{}),Object(o.jsx)("button",{id:"panButton",children:"pan"})]}),Object(o.jsxs)("li",{children:[Object(o.jsx)("label",{children:"Match:"}),Object(o.jsx)("br",{}),Object(o.jsx)("input",{id:"matchCheckbox",type:"checkbox"})]}),Object(o.jsx)("li",{children:Object(o.jsx)("button",{id:"swapButton",onClick:this.props.swapBoard,children:"About"})})]})})}}]),n}(a.a.Component),O=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(o.jsxs)("div",{id:"infoSpace",children:[Object(o.jsx)("h1",{children:"A quick Explaination"}),Object(o.jsx)("p",{children:"This is a drawing programme that recognises mathematical symbols. To use, draw out the symbol. The programme will then try to make its best guess and replace the drawn symbol into the text version. Either wait for a few seconds for the programme to change it, or press (c) to instantly convert the last drawn line into the symbol. Pressing (z) will undo the latest conversion. The match checkbox will either enable to disable the guess."}),Object(o.jsxs)("p",{children:["The symbols the model will recognise are : ",Object(o.jsx)("br",{}),"!, (, ), +, |, \u2015, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, =, \ud835\udc4e, \u03b1, |, ",Object(o.jsx)("br",{}),"\ud835\udc4f, \u03b2, \ud835\udc50, cos, \ud835\udc51, \u0394, \xf7, \ud835\udc52, \u2203, \ud835\udc53, \u2200, \ud835\udc54, \u03b3, \u2265, ",">",", \ud835\udc89, \ud835\udc56, in, \u221e, ",Object(o.jsx)("br",{}),"\u222b, \ud835\udc57, \ud835\udc58, \u2113, \u03bb, \u2264, lim, log, ","<",", \ud835\udc5a, mu, \ud835\udc5b, \u2260, \ud835\udc5c, \ud835\udc5d, \u03d5, \u03c0, \xb1, \ud835\udc5e, \ud835\udc5f, \u2192, ",Object(o.jsx)("br",{}),"\ud835\udc60, \u03c3, sin, \u221a, \u03a3, \ud835\udc61, tan, \u03b8, \xd7, \ud835\udc62, \ud835\udc63, \ud835\udc64, \ud835\udc65, \ud835\udc66, \ud835\udc67, [, ], ","{",", ","}"," ",Object(o.jsx)("br",{})]}),Object(o.jsxs)("p",{children:["The dataset that was used can be found at ",Object(o.jsx)("a",{href:"https://www.kaggle.com/xainano/handwrittenmathsymbols",children:"Here"}),". Also, some code were referenced from ",Object(o.jsx)("a",{href:"https://www.florin-pop.com/blog/2019/04/drawing-app-built-with-p5js/",children:"This blog"}),"."]}),Object(o.jsx)("h2",{children:"Quick Thoughts:"}),Object(o.jsxs)("p",{children:["The model is an CNN, that takes in the line drawn, and nearby lines/ lines that were drawn close in time, and makes a guess as to what was drawn. ",Object(o.jsx)("br",{}),"A giant problem with my method of predicting is, that i literally have no idea when a character is drawn and when the next starts. For example, one could try and draw an x, which takes 2 strokes, which could be intepreted as brackets.  x and )( look alike. There is also a problem with symbols looking alike, like x(letter) and \xd7(times). ",Object(o.jsx)("br",{}),"This makes predicting the symbol really hard to do. Any suggestions or criticisms pls do tell :) (msg me on reddit u/irony94)"]})]})}}]),n}(a.a.Component),v=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).state={showingBoard:!0},t.swapBoards=t.swapBoards.bind(Object(d.a)(t)),t}return Object(h.a)(n,[{key:"swapBoards",value:function(){var t=document.getElementById("swapButton");"About"===t.innerHTML?t.innerHTML="Board":t.innerHTML="About",this.setState((function(t){return{showingBoard:!t.showingBoard}}))}},{key:"render",value:function(){return Object(o.jsx)("div",{id:"app",children:Object(o.jsxs)("div",{id:"drawingApp",children:[Object(o.jsx)(w,{swapBoard:this.swapBoards}),this.state.showingBoard?Object(o.jsx)(g,{}):Object(o.jsx)(O,{})]})})}}]),n}(a.a.Component);c.a.render(Object(o.jsx)(v,{}),document.getElementById("root"))}},[[296,1,2]]]);
//# sourceMappingURL=main.3ec12e0b.chunk.js.map